#!/bin/bash

# Log that the post-commit hook is running
echo "Running post-commit hook..."

# Capture the current branch
branch=$(git symbolic-ref --short HEAD)
echo "Current branch: $branch"

# Ensure the branch name was detected
if [ -z "$branch" ]; then
  echo "Error: Could not detect the current branch."
  exit 1
fi

# Push the changes
echo "Pushing changes to origin/$branch..."
git push origin "$branch"

# Check if the push succeeded
if [ $? -eq 0 ]; then
  echo "Post-push actions starting..."
  # Add any post-push actions here, like notifying a service or running scripts
  echo "Completed post-push actions."
else
  echo "Push failed. No post-push actions executed."
  exit 1
fi