#!/bin/bash

# Log current branch detection
echo "Detecting the current branch..."

# Get the current branch name
branch=$(git symbolic-ref --short HEAD 2>&1)

# Check if branch detection was successful
if [ $? -ne 0 ]; then
  echo "Error: Failed to detect the current branch."
  echo "Branch output: $branch"
  exit 1
fi

# Log the branch name
echo "Current branch detected: $branch"

# Log that we are starting the push
echo "Pushing changes to origin/$branch..."

# Push changes to the detected branch
push_output=$(git push origin "$branch" 2>&1)

# Check if git push was successful
if [ $? -ne 0 ]; then
  echo "Error: git push failed."
  echo "Push output: $push_output"
  exit 1
fi

# Log success message
echo "Changes pushed successfully to origin/$branch!"